(this["webpackJsonplike-dislike"]=this["webpackJsonplike-dislike"]||[]).push([[0],{190:function(e,t,o){},192:function(e,t,o){"use strict";o.r(t);var c=o(0),r=o.n(c),n=o(37),a=o.n(n),s=(o(85),o(17)),i=o(1),l=function(){return Object(i.jsx)("nav",{className:"navbar navbar-expand bg-dark",children:Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"navbar-nav",children:[Object(i.jsx)(s.b,{className:"nav-link active",to:"/",children:"Home"}),Object(i.jsx)(s.b,{className:"nav-link",to:"/books",children:"Books"}),Object(i.jsx)(s.b,{className:"nav-link",to:"/add_book",children:"Add book"})]})})})},d=o(4),b=function(){return Object(i.jsx)("div",{className:"container-fluid",style:{backgroundImage:"url(https://media.wired.com/photos/5fd2c29c2a4ddaf3b6389694/16:9/w_1280%2Cc_limit/Gear-Books-Roundup-671406905.jpg)",height:"100vh",backgroundRepeat:"none",backgroundSize:"cover",paddingTop:"200px"},children:Object(i.jsxs)("div",{className:"text-center text-dark w-50 mx-auto p-3 bg-light",children:[Object(i.jsx)("h1",{className:"text-primary",style:{fontSize:"36px"},children:"What to read?"}),Object(i.jsx)("h4",{children:"Top 10 most interesting books"})]})})},j=o(11),u={addBook:"Books/ add book to books",getAllBooks:"Books/ get books trom local storage",addCommentTobook:"Books /add comment to book"},m={showLoader:"App/ start loading",hideLoader:"App/ stop loading"},h=function(){return{type:m.showLoader}},x=function(){return{type:m.hideLoader}},O=o(5),p=function(){return JSON.parse(localStorage.getItem("books"))||[]},f=function(){return function(e){e(h()),setTimeout((function(){try{e(y()),e(x())}catch(t){console.log(t.message)}}),2e3)}},v=function(e,t){return function(o){o(h()),setTimeout((function(){try{!function(e,t){var o=p(),c=o.findIndex((function(t){return t.id===e}));o[c].comments.push(t),o[c].rate=(o[c].comments.reduce((function(e,t){return e+ +t.note}),0)/o[c].comments.length).toFixed(1),localStorage.setItem("books",JSON.stringify(o))}(e,t),o(N(e,t)),o(x())}catch(c){console.log(c.message)}}),1e3)}},k=function(e){return function(t){t(x()),setTimeout((function(){try{!function(e){var t=[].concat(Object(O.a)(p()),[e]);localStorage.setItem("books",JSON.stringify(t))}(e),t(g(e)),t(x())}catch(o){console.log(o.message)}}),2e3)}},g=function(e){return{type:u.addBook,payload:e}},y=function(){return{type:u.getAllBooks,payload:p()}},N=function(e,t){return{type:u.addCommentTobook,payload:{bookId:e,comment:t}}},w=function(e){return Object(i.jsxs)("div",{className:"d-flex justify-content-center my-3",children:[Object(O.a)(Array(Math.floor(e))).map((function(e,t){return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star-fill text-warning me-1",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"})},t)})),Math.round(e)>e&&Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-star-half text-warning",viewBox:"0 0 16 16",children:Object(i.jsx)("path",{d:"M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z"})})]})},B=function(e){var t=e.rate;return w(t)},L=function(e){var t=e.book,o=e.history;return Object(i.jsx)("div",{className:"col mt-5",children:Object(i.jsxs)("div",{className:"card text-center h-100 mb-3 px-2",children:[Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("img",{src:t.cover,className:"card-img-top",alt:"..."})}),Object(i.jsx)("h4",{className:"card-title",children:t.title}),Object(i.jsxs)("p",{children:["by: ",t.author]}),t.rate?Object(i.jsx)(B,{rate:+t.rate}):Object(i.jsx)("p",{style:{fontSize:"9px"},children:"not rate yet"}),Object(i.jsx)("button",{className:"btn btn-primary btn-sm mb-3",onClick:function(){o.push("/book/".concat(t.id))},children:"Read more"})]})})},A=Object(j.b)((function(e){return{books:e.BooksReducer.books}}),(function(e){return{getBooks:function(){return e(f())}}}))((function(e){var t=e.books,o=e.getBooks,r=e.history;return Object(c.useEffect)((function(){0===t.length&&o()}),[]),t.sort((function(e,t){return t.rate-e.rate})),Object(i.jsxs)("div",{className:"container mt-5",children:[Object(i.jsx)("h2",{children:"List of the best books"}),Object(i.jsx)("div",{className:"row row-cols-2 row-cols-md-4",children:t.map((function(e){return Object(i.jsx)(L,{book:e,history:r},e.id)}))})]})})),S=o(3),C=o(12),T=o.n(C),I=o(19),q=o(23),R=["label","id","error"],z=function(e){var t=e.label,o=e.id,c=e.error,r=Object(q.a)(e,R);return Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:o,children:t}),Object(i.jsx)("input",Object(S.a)({id:o,className:"form-control mb-3"},r)),c&&Object(i.jsx)("p",{className:"text-danger",children:c})]})},F=["label","id","error"],M=function(e){var t=e.label,o=e.id,c=e.error,r=Object(q.a)(e,F);return Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:o,children:t}),Object(i.jsx)("textarea",Object(S.a)({id:o,className:"form-control mb-3"},r)),c&&Object(i.jsx)("p",{className:"text-danger",children:c})]})},E=o(29),J=o(20),Q=Object(j.b)(null,(function(e){return{addBook:function(t){return e(k(t))}}}))((function(e){var t,o=e.addBook,c=e.history,r=J.b().shape({title:J.c().min(3).required(),author:J.c().min(3).required(),cover:J.c().url(),description:J.c().required().min(20),pageQnt:J.a().required().positive().integer()}),n=Object(E.b)({defaultValues:{title:"",author:"",cover:"",description:"",pageQnt:""},validate:(t=r,function(){var e=Object(I.a)(T.a.mark((function e(o){var c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.prev=1,e.next=4,t.validate(o,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,o=e.message;return Object(E.a)(c,t,o)}));case 9:return e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e,t){var r=t.reset;console.log("onSubmit: ",e),o(Object(S.a)(Object(S.a)({},e),{},{id:Date.now(),comments:[]})),r(),c.push("/books")}}),a=n.form,s=(0,n.use)("errors",{errorWithTouched:!0});return Object(i.jsxs)("div",{className:"container mt-5",children:[Object(i.jsx)("h2",{children:"Add your favorite book"}),Object(i.jsxs)("form",{className:"w-50 mx-auto mt-4 text-start",ref:a,noValidate:!0,children:[Object(i.jsx)(z,{autoFocus:!0,label:"Book title",id:"title",name:"title",placeholder:"type book title",error:s.title}),Object(i.jsx)(z,{label:"Book author",id:"author",name:"author",placeholder:"type book author",error:s.author}),Object(i.jsx)(z,{label:"Book cover",id:"cover",name:"cover",placeholder:"type book cover",error:s.cover}),Object(i.jsx)(z,{label:"Page quantity",id:"pageQnt",name:"pageQnt",placeholder:"type book page quantity",error:s.pageQnt}),Object(i.jsx)(M,{label:"Book description",id:"description",name:"description",placeholder:"type book description",required:!0,error:s.description}),Object(i.jsx)("input",{type:"submit",className:"btn btn-primary  w-100 mb-3"})]})]})})),V=function(){return Object(i.jsxs)("div",{className:"d-flex justify-content-center",style:{marginTop:"50px"},children:[Object(i.jsx)("div",{className:"spinner-grow text-primary me-2",role:"status"}),Object(i.jsx)("div",{className:"spinner-grow text-primary me-2",role:"status"}),Object(i.jsx)("div",{className:"spinner-grow text-primary me-2",role:"status"})]})},_=function(e){var t=e.comment;return Object(i.jsx)("div",{className:"card border-1",children:Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("h4",{className:"card-title",children:["comment by: ",t.name," "]}),Object(i.jsx)("p",{className:"card-tet",children:t.text}),Object(i.jsxs)("p",{className:"card-tet",children:["Note: ",t.note]})]})})},W=function(e){var t=e.comments;return 0===t.length?Object(i.jsx)("h4",{children:"No comments yet"}):Object(i.jsx)("ul",{className:"list-unstyled w-75 mx-auto",children:t.map((function(e){return Object(i.jsx)("li",{className:"mb-1 text-start",children:Object(i.jsx)(_,{comment:e})},e.id)}))})},Y=["label","id","children","error"],D=function(e){var t=e.label,o=e.id,c=e.children,r=e.error,n=Object(q.a)(e,Y);return Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:o,children:t}),Object(i.jsx)("select",Object(S.a)(Object(S.a)({id:o},n),{},{className:"form-select mb-3",children:c})),r&&Object(i.jsx)("p",{className:"text-danger",children:r})]})},G=Object(j.b)(null,(function(e){return{addCommentToBook:function(t,o){return e(v(t,o))}}}))((function(e){var t=e.bookId,o=e.addCommentToBook,c=Object(E.b)({defaultValues:{name:"",text:"",note:""},onSubmit:function(e,c){var r=c.reset;console.log("onSubmit",e),o(t,Object(S.a)(Object(S.a)({},e),{},{id:Date.now()})),r()}}),r=c.form,n=(0,c.use)("errors",{errorWithTouched:!0});return Object(i.jsxs)("div",{className:"w-75 mx-auto mt-5 text-start",children:[Object(i.jsx)("h5",{children:"Add your Comment"}),Object(i.jsxs)("form",{ref:r,noValidate:!0,children:[Object(i.jsx)(z,{label:"Your name",id:"name",name:"name",placeholder:"type your name",required:!0,minLength:4,error:n.name}),Object(i.jsx)(M,{label:"Your comment",id:"text",name:"text",placeholder:"type comment",required:!0,error:n.text}),Object(i.jsxs)(D,{label:"Your note",id:"note",name:"note",required:!0,error:n.note,children:[Object(i.jsx)("option",{value:"",disabled:!0,children:"Choice your note"}),Object(i.jsx)("option",{value:"1",children:"1"}),Object(i.jsx)("option",{value:"2",children:"2"}),Object(i.jsx)("option",{value:"3",children:"3"}),Object(i.jsx)("option",{value:"4",children:"4"}),Object(i.jsx)("option",{value:"5",children:"5"})]}),Object(i.jsx)("input",{type:"submit",className:"btn btn-dark w-100"})]})]})})),H=Object(j.b)((function(e){return{books:e.BooksReducer.books}}),(function(e){return{getBooks:function(){return e(f())}}}))((function(e){var t=e.match,o=e.history,r=e.books,n=e.getBooks;Object(c.useEffect)((function(){0===r.length&&n()}),[]);var a=+t.params.id,s=r.find((function(e){return e.id===a}));return 0===r.length?Object(i.jsx)(V,{}):Object(i.jsx)("div",{className:"container mt-5",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"card col-4 text-center mb-3 px-3 align-self-start",children:[Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsx)("h3",{className:"card-title",children:s.title}),Object(i.jsxs)("h5",{children:["by: ",s.author]}),Object(i.jsx)("img",{src:s.cover,className:"card-img-top",alt:"...",style:{width:"50%"}})]}),Object(i.jsx)("p",{className:"mt-3",children:s.description}),s.rate?Object(i.jsx)(B,{rate:+s.rate}):Object(i.jsx)("p",{style:{fontSize:"9px"},children:"not rate yet"}),Object(i.jsx)("button",{className:"btn btn-primary btn-sm mb-3",onClick:function(){o.push("/books")},children:"Back to list"})]}),Object(i.jsxs)("div",{className:"col-8 px-5",children:[Object(i.jsx)("h3",{className:"text-center",children:"Comments"}),Object(i.jsx)(W,{comments:s.comments}),Object(i.jsx)(G,{bookId:s.id})]})]})})})),P=function(){return Object(i.jsxs)(d.c,{children:[Object(i.jsx)(d.a,{path:"/",exact:!0,component:b}),Object(i.jsx)(d.a,{path:"/books",component:A}),Object(i.jsx)(d.a,{path:"/add_book",component:Q}),Object(i.jsx)(d.a,{path:"/book/:id",exact:!0,component:H})]})};o(190);var K=Object(j.b)((function(e){return{isLoading:e.AppReducer.isLoading}}))((function(e){var t=e.isLoading;return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(l,{}),t?Object(i.jsx)(V,{}):Object(i.jsx)(P,{})]})})),U=(o(191),o(40)),X=o(79),Z={isLoading:!1},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,o=t.type;switch(o){case m.showLoader:return Object(S.a)(Object(S.a)({},e),{},{isLoading:!0});case m.hideLoader:return Object(S.a)(Object(S.a)({},e),{},{isLoading:!1});default:return e}},ee={books:[]},te=function(e,t,o){var c=Object(O.a)(e.books),r=c.findIndex((function(e){return e.id===t})),n=Object(S.a)({},c[r]);return n.comments=[].concat(Object(O.a)(n.comments),[o]),n.rate=(n.comments.reduce((function(e,t){return e+ +t.note}),0)/n.comments.length).toFixed(1),c[r]=n,Object(S.a)(Object(S.a)({},e),{},{books:c})},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,o=t.type,c=t.payload;switch(o){case u.getAllBooks:return console.log(c),Object(S.a)(Object(S.a)({},e),{},{books:Object(O.a)(c)});case u.addBook:return Object(S.a)(Object(S.a)({},e),{},{books:[].concat(Object(O.a)(e.books),[c])});case u.addCommentTobook:return te(e,c.bookId,c.comment);default:return e}},ce=o(80),re=o.n(ce),ne=Object(U.b)({AppReducer:$,BooksReducer:oe}),ae=Object(U.c)(ne,Object(U.a)(X.a,re.a));a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(j.a,{store:ae,children:Object(i.jsx)(s.a,{basename:"/BooksApp",children:Object(i.jsx)(K,{})})})}),document.getElementById("root"))},85:function(e,t,o){}},[[192,1,2]]]);
//# sourceMappingURL=main.0079e192.chunk.js.map